{"ast":null,"code":"import _slicedToArray from\"D:/Repo/softmint-react-pro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Card,CardHeader,CardBody,Button,Col,CardFooter,Pagination,PaginationItem,PaginationLink,Table,Container,Row// Dropdown,\n}from\"reactstrap\";import DatePicker from\"react-datepicker\";import{useState}from\"react\";import\"react-datepicker/dist/react-datepicker.css\";import Dropdown from\"views/examples/Dropdown\";import Dropdown2 from\"views/examples/Dropdown2\";import{useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var index=0;var page=0;var numOfRows=10;/**\r\n * \r\n * @param {String dateString} \r\n * @returns Formated Date as YYYY-MM-DD\r\n */function formatDate(dateString){var date=new Date(dateString);var year=date.getFullYear();var month=date.getMonth()+1;var day=date.getDate();if(day<10){day=0+\"\"+day;}if(month<10){month=0+\"\"+month;}return year+'-'+month+'-'+day;}export default function AEPS(){var _this=this;var _useState=useState(),_useState2=_slicedToArray(_useState,2),sdate=_useState2[0],setsDate=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),edate=_useState4[0],seteDate=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),resMap=_useState8[0],setResponse=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),count=_useState10[0],setCount=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),query=_useState12[0],setQuery=_useState12[1];console.log(resMap.filter(function(row){return row.narration.toLowerCase().includes(\"\");}));//console.log(filter(query, 0 , resMap))\n// const handleChange = (e) => {\n//     setquery(e.target.value)\n// }\nvar handlstartdate=function handlstartdate(e){console.log(formatDate(e));setsDate(e);};var handlenddate=function handlenddate(e){seteDate(e);};var handelNext=function handelNext(e){page+=1;setCount(page);var token=localStorage.getItem(\"token\");if(token!==null||token!==undefined){var myHeaders=new Headers();myHeaders.append(\"Authorization\",\"Bearer \"+localStorage.getItem(\"token\"));myHeaders.append(\"Content-Type\",\"application/json\");console.log(formatDate(sdate),formatDate(edate));var raw=JSON.stringify({\"endDate\":formatDate(edate),\"startDate\":formatDate(sdate),\"userId\":\"\"});var requestOptions={method:\"POST\",headers:myHeaders,body:raw,redirect:\"follow\"};var transactionUrl=\"https://uat.softmintdigital.com/reportservice/transaction/aepsreport?pageNo=\"+page+\"&pageSize=\"+numOfRows;fetch(transactionUrl,requestOptions).then(function(response){return response.json();}).then(function(result){index=0;setResponse(result.report);setIsLoading(false);console.log(transactionUrl);}).catch(function(error){return console.log(error);});}};var handlePrevious=function handlePrevious(){if(page<=0){page=0;}else{page-=1;}setCount(page);var token=localStorage.getItem(\"token\");if(token!==null||token!==undefined){var myHeaders=new Headers();myHeaders.append(\"Authorization\",\"Bearer \"+localStorage.getItem(\"token\"));myHeaders.append(\"Content-Type\",\"application/json\");console.log(formatDate(sdate),formatDate(edate));var raw=JSON.stringify({endDate:formatDate(edate),startDate:formatDate(sdate),userId:\"\"});var requestOptions={method:\"POST\",headers:myHeaders,body:raw,redirect:\"follow\"};var transactionUrl=\"https://uat.softmintdigital.com/reportservice/transaction/aepsreport?pageNo=\"+page+\"&pageSize=\"+numOfRows;fetch(transactionUrl,requestOptions).then(function(response){return response.json();}).then(function(result){index=0;setResponse(result.report);setIsLoading(false);console.log(result.report);}).catch(function(error){return console.log(error);});}};var handleApi=function handleApi(){setIsLoading(true);var token=localStorage.getItem(\"token\");if(token!==null||token!==undefined){var myHeaders=new Headers();myHeaders.append(\"Authorization\",\"Bearer \"+localStorage.getItem(\"token\"));myHeaders.append(\"Content-Type\",\"application/json\");console.log(formatDate(sdate),formatDate(edate));var raw=JSON.stringify({endDate:formatDate(edate),startDate:formatDate(sdate),userId:\"\"});var requestOptions={method:\"POST\",headers:myHeaders,body:raw,redirect:\"follow\"};var transactionUrl=\"https://uat.softmintdigital.com/reportservice/transaction/aepsreport?pageNo=\"+page+\"&pageSize=\"+numOfRows;fetch(transactionUrl,requestOptions).then(function(response){return response.json();}).then(function(result){index=0;setResponse(result.report);console.log(result.report);setIsLoading(false);}).catch(function(error){return console.log(error);});}else{_this.props.history.push(\"/auth/login\");}};if(isLoading)return'loading';return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"header bg-gradient-info pb-8 pt-5 pt-md-8\",children:/*#__PURE__*/_jsx(Container,{fluid:true,children:/*#__PURE__*/_jsx(\"div\",{className:\"header-body\",children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:\"12\",xl:\"12\",children:/*#__PURE__*/_jsx(Card,{className:\"card-stats mb-4 mb-xl-0\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{lg:\"2\",md:\"6\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Start Date: \"}),/*#__PURE__*/_jsx(DatePicker,{className:\"form-control\",selected:sdate,onChange:handlstartdate,placeholderText:\"Select Date\",showPopperArrow:false,dateFormat:\"yyyy-MM-dd\",id:\"dates\"})]}),/*#__PURE__*/_jsxs(Col,{lg:\"2\",md:\"6\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"End Date: \"}),/*#__PURE__*/_jsx(DatePicker,{className:\"form-control\",selected:edate,dateFormat:\"yyyy-MM-dd\",placeholderText:\"Select Date\",showPopperArrow:false,onChange:handlenddate,id:\"datee\"})]}),/*#__PURE__*/_jsxs(Col,{lg:\"2\",md:\"6\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Search\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\"// value={query} \n,onChange:function onChange(e){return setQuery(e.target.value);},className:\"form-control\",placeholder:\"Search\",style:{marginBottom:\"2px\"}})})]}),/*#__PURE__*/_jsx(Col,{lg:\"2\",md:\"6\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",style:{backgroundColor:\"#11cdef\",textAlign:\"center\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",marginTop:\"30px\"},onClick:handleApi,\"data-clipboard-text\":\"align-center\",id:\"tooltip662352101\",children:\"UPDATE\"})}),/*#__PURE__*/_jsx(Col,{lg:\"2\",md:\"6\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",style:{backgroundColor:\"#11cdef\",textAlign:\"center\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",marginTop:\"30px\"},\"data-clipboard-text\":\"align-center\",id:\"tooltip662352101\",children:\"Export\"})}),/*#__PURE__*/_jsx(Col,{lg:\"2\",md:\"6\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",style:{backgroundColor:\"#11cdef\",textAlign:\"center\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",marginTop:\"30px\"},\"data-clipboard-text\":\"align-center\",id:\"tooltip662352101\",children:\"Export\"})})]})})})})})})})}),/*#__PURE__*/_jsx(Container,{className:\"mt--7\",fluid:true,style:{backgroundColor:\"#\"},children:/*#__PURE__*/_jsx(Row,{className:\"mb--20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(Card,{className:\"shadow\",children:[/*#__PURE__*/_jsxs(CardHeader,{className:\" border-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\" mt-0\",children:\"AEPS Report\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"-2rem\"},children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"...\",children:/*#__PURE__*/_jsxs(Pagination,{className:\"pagination justify-content-end mb-0\",listClassName:\"justify-content-end mb-0\",children:[/*#__PURE__*/_jsx(PaginationItem,{className:\"pagination\",children:/*#__PURE__*/_jsxs(PaginationLink,{href:\"#pablo\",onClick:handlePrevious,tabIndex:\"-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Previous\"})]})}),/*#__PURE__*/_jsx(PaginationItem,{className:\"pagination\",children:/*#__PURE__*/_jsxs(PaginationLink,{href:\"#pablo\",tabIndex:\"-1\",children:[count,/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Previous\"})]})}),/*#__PURE__*/_jsx(PaginationItem,{children:/*#__PURE__*/_jsxs(PaginationLink,{href:\"#pablo\",onClick:handelNext,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-right\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Next\"})]})})]})})})]}),/*#__PURE__*/_jsxs(Table,{className:\"align-items-center table-flush\",responsive:true,reflow:\"true\",id:\"dataTable\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"SR NO.\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"username\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"userId\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"mobile\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"adhaar\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"marchentTransactionld\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"bankRRN\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"transaction Type\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"transaction Amount\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"balanceAmount\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"narration\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"lin\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"bankName\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"agentCode\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"latitude\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"longitude\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"date&time\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:resMap.filter(function(row){return row.narration.includes(query);}).map(function(row){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+=1}),/*#__PURE__*/_jsx(\"td\",{children:row.username}),/*#__PURE__*/_jsx(\"td\",{children:row.userid}),/*#__PURE__*/_jsx(\"td\",{children:row.mobile}),/*#__PURE__*/_jsx(\"td\",{children:row.adhaar}),/*#__PURE__*/_jsx(\"td\",{children:row.marchentTransactionId}),/*#__PURE__*/_jsx(\"td\",{children:row.bankRRN}),/*#__PURE__*/_jsx(\"td\",{children:row.transactionType}),/*#__PURE__*/_jsx(\"td\",{children:row.transactionAmount}),/*#__PURE__*/_jsx(\"td\",{children:row.balanceAmount}),/*#__PURE__*/_jsx(\"td\",{children:row.status}),/*#__PURE__*/_jsx(\"td\",{children:row.narration},row.narration),/*#__PURE__*/_jsx(\"td\",{children:row.iin}),/*#__PURE__*/_jsx(\"td\",{children:row.bankName}),/*#__PURE__*/_jsx(\"td\",{children:row.agentCode}),/*#__PURE__*/_jsx(\"td\",{children:row.latitude}),/*#__PURE__*/_jsx(\"td\",{children:row.longitude}),/*#__PURE__*/_jsxs(\"td\",{children:[row.date,\"&\",row.time]})]});})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"App\"})]})})})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}