{"ast":null,"code":"\"use strict\";\n\nvar isValue = require(\"es5-ext/object/is-value\"),\n  setPrototypeOf = require(\"es5-ext/object/set-prototype-of\"),\n  object = require(\"es5-ext/object/valid-object\"),\n  ensureValue = require(\"es5-ext/object/valid-value\"),\n  randomUniq = require(\"es5-ext/string/random-uniq\"),\n  d = require(\"d\"),\n  getIterator = require(\"es6-iterator/get\"),\n  forOf = require(\"es6-iterator/for-of\"),\n  toStringTagSymbol = require(\"es6-symbol\").toStringTag,\n  isNative = require(\"./is-native-implemented\"),\n  isArray = Array.isArray,\n  defineProperty = Object.defineProperty,\n  objHasOwnProperty = Object.prototype.hasOwnProperty,\n  getPrototypeOf = Object.getPrototypeOf,\n  _WeakMapPoly;\nmodule.exports = _WeakMapPoly = function WeakMapPoly( /* Iterable*/\n) {\n  var iterable = arguments[0],\n    self;\n  if (!(this instanceof _WeakMapPoly)) throw new TypeError(\"Constructor requires 'new'\");\n  self = isNative && setPrototypeOf && WeakMap !== _WeakMapPoly ? setPrototypeOf(new WeakMap(), getPrototypeOf(this)) : this;\n  if (isValue(iterable)) {\n    if (!isArray(iterable)) iterable = getIterator(iterable);\n  }\n  defineProperty(self, \"__weakMapData__\", d(\"c\", \"$weakMap$\" + randomUniq()));\n  if (!iterable) return self;\n  forOf(iterable, function (val) {\n    ensureValue(val);\n    self.set(val[0], val[1]);\n  });\n  return self;\n};\nif (isNative) {\n  if (setPrototypeOf) setPrototypeOf(_WeakMapPoly, WeakMap);\n  _WeakMapPoly.prototype = Object.create(WeakMap.prototype, {\n    constructor: d(_WeakMapPoly)\n  });\n}\nObject.defineProperties(_WeakMapPoly.prototype, {\n  delete: d(function (key) {\n    if (objHasOwnProperty.call(object(key), this.__weakMapData__)) {\n      delete key[this.__weakMapData__];\n      return true;\n    }\n    return false;\n  }),\n  get: d(function (key) {\n    if (!objHasOwnProperty.call(object(key), this.__weakMapData__)) return undefined;\n    return key[this.__weakMapData__];\n  }),\n  has: d(function (key) {\n    return objHasOwnProperty.call(object(key), this.__weakMapData__);\n  }),\n  set: d(function (key, value) {\n    defineProperty(object(key), this.__weakMapData__, d(\"c\", value));\n    return this;\n  }),\n  toString: d(function () {\n    return \"[object WeakMap]\";\n  })\n});\ndefineProperty(_WeakMapPoly.prototype, toStringTagSymbol, d(\"c\", \"WeakMap\"));","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}